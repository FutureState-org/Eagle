<div class="example-container mat-elevation-z8">
  <div class="example-table-container">
    <mat-table #table matSort [ngStyle]="{'height': bodyHeight}" [matSortActive]="widgetData.sortColumn"
      [matSortDirection]="widgetData.sortState" [dataSource]="dataSource" class="example-table table1 responsiveTable">
      <!-- Checkbox Column -->
      <!-- <ng-container *ngIf="widgetData.needCheckBox === true" matColumnDef="select">
                <mat-header-cell *matHeaderCellDef>
                    <mat-checkbox (change)="$event ? masterToggle() : null"
                        [checked]="selection.hasValue() && isAllSelected()"
                        [indeterminate]="selection.hasValue() && !isAllSelected()" [aria-label]="checkboxLabel()">
                    </mat-checkbox>
                </mat-header-cell>
                <mat-cell *matCellDef="let row">
                    <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? selection.toggle(row) : null"
                        [checked]="selection.isSelected(row)" [aria-label]="checkboxLabel(row)">
                    </mat-checkbox>
                </mat-cell>
            </ng-container>
            <ng-container *ngIf="widgetData.needHash" matColumnDef="SR">
                <mat-header-cell *matHeaderCellDef>#</mat-header-cell>
                <mat-cell *matCellDef="let element;let i = index"> {{i+1}}</mat-cell>
            </ng-container> -->

      <ng-container matColumnDef="{{col.key}}" *ngFor="let col of widgetData.columns">
        <mat-header-cell *matHeaderCellDef mat-sort-header> {{col.displayName}} </mat-header-cell>
        <mat-cell *matCellDef="let element">
          <!-- <span *ngIf="col.isList"
                        [matTooltip]="element[col.displayName]">{{filterList(element[col.key],col.prop) }}</span> -->
          <span *ngIf="col.isList" class="textclass"
            [matTooltip]="(element[col.key] | listPipe: col.prop).split('<br />').join(', ')">
            <div innerHTML="{{element[col.key] | listPipe: col.prop }}"></div>
          </span>
          <img mat-card-image class="small-list-logo" *ngIf="col.image && element[col.image]" [src]="element[col.image]"
            (error)="changeToDefaultImg($event)" [alt]="element[col.key]" />

          <span *ngIf="!col.isList && !col.link" class="textclass">
            {{element[col.key] || col.defaultValue}}
          </span>

          <a *ngIf="col.link" [routerLink]="col.link.path+element[col.link.dParams]"
            routerLinkActive="router-link-active" class="textclass">
            {{element[col.key] || col.defaultValue}}
            <!-- {{col.appIcon}} -->
          </a>
        </mat-cell>
      </ng-container>

      <ng-container matColumnDef="Actions" *ngIf="widgetData.actions && widgetData.actions.length > 0">
        <mat-header-cell *matHeaderCellDef class="clr-darkish-blue action-header"> Actions </mat-header-cell>
        <mat-cell *matCellDef="let row" class="action-cell">
          <div *ngFor="let ac of widgetData.actions">
            {{ac | json}}
            <!-- <div *ngIf="ac.optional">
              <app-button *ngIf="row[ac.optional_key] === ac.optional_Value" [type]="ac.type" [icon]="ac.icon"
                [disabled]="ac.disabled || false" [label]="ac.label" (click)="buttonClick(ac.name,row)"></app-button>
            </div>
            <div *ngIf="!ac.optional">
              <app-button [type]="ac.type" [icon]="ac.icon" [label]="ac.label" [disabled]="ac.disabled || false"
                (click)="buttonClick(ac.name,row)"></app-button>
            </div> -->
          </div>
        </mat-cell>
      </ng-container>
      <ng-container matColumnDef="ActionsMenu" *ngIf="widgetData.actionsMenu">
        <mat-header-cell *matHeaderCellDef class="clr-darkish-blue action-header">
          <mat-icon *ngIf="widgetData.actionsMenu.headIcon" (click)="updatedisplay()">
            {{widgetData.actionsMenu.headIcon}}</mat-icon>
          <span *ngIf="!widgetData.actionsMenu.headIcon">Actions</span>
        </mat-header-cell>
        <mat-cell *matCellDef="let row" class="action-cell">
          <div class="flex">
            <button mat-icon-button [matMenuTriggerFor]="moreMenu" [matMenuTriggerData]="{'data':row}">
              <mat-icon>{{widgetData.actionsMenu.rowIcon}}</mat-icon>
            </button>
          </div>
        </mat-cell>
      </ng-container>

      <mat-header-row *matHeaderRowDef="getFinalColumns()"></mat-header-row>
      <mat-row *matRowDef="let row; columns: getFinalColumns();" (click)="selection.toggle(row)">
      </mat-row>
    </mat-table>
  </div>
  <!-- <mat-paginator [length]="5" [pageSize]="10" [pageSizeOptions]="[5, 10, 25]">
    </mat-paginator> -->
</div>

<mat-menu #moreMenu="matMenu">
  <ng-template matMenuContent let-rowData="data">
    <ng-container *ngFor="let menu of widgetData.actionsMenu.menus">
      <a mat-menu-item (click)="actionsClick.emit({'action':menu.action,data:rowData})">
        <!-- (click)="takeAction('edit')" -->
        <mat-icon>{{menu.icon}}</mat-icon>
        <span i18n>{{menu.name}}</span>
        <!-- {{menuItems | json}} -->
      </a>
    </ng-container>
  </ng-template>
  <!-- <a *ngIf="showMenuItem('edit')" mat-menu-item (click)="takeAction('edit')">
    <mat-icon>edit</mat-icon>
    <span i18n>Edit </span>
  </a>
  <a *ngIf="showMenuItem('delete')" mat-menu-item (click)="takeAction('delete')">
    <mat-icon>delete</mat-icon>
    <span i18n>Delete </span>
  </a>
  <a *ngIf="showMenuItem('comments')" mat-menu-item (click)="viewComments()">
    <mat-icon>comment</mat-icon>
    <span i18n>View comments</span>
  </a>
  <a *ngIf="showMenuItem('publish')" mat-menu-item (click)="takeAction('publish')">
    <mat-icon>publish</mat-icon>
    <span i18n>Publish</span>
  </a>
  <a *ngIf="showMenuItem('unpublish')" mat-menu-item (click)="takeAction('unpublish')">
    <mat-icon>reply</mat-icon>
    <span i18n>Unpublish content</span>
  </a>
  <a *ngIf="showMenuItem('review')" mat-menu-item (click)="takeAction('review')">
    <mat-icon>rate_review</mat-icon>
    <span i18n>Review</span>
  </a>
  <a *ngIf="showMenuItem('moveToDraft')" mat-menu-item (click)="takeAction('moveToDraft')">
    <mat-icon>reply</mat-icon>
    <span i18n>Recall content to draft</span>
  </a>
  <a *ngIf="showMenuItem('moveToInReview')" mat-menu-item (click)="takeAction('moveToInReview')">
    <mat-icon>reply</mat-icon>
    <span i18n>Send content to previous state</span>
  </a>
  <ng-container>
    <a *ngIf="showMenuItem('lang')" mat-menu-item [matMenuTriggerFor]="langMenu">
      <mat-icon>translate</mat-icon>
      <span i18n>Languages</span>
    </a>
  </ng-container> -->
</mat-menu>