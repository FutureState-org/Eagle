<ng-container *ngIf="!previewIdentifier">
  <ws-auth-editor-action-buttons (action)="action($event)" [buttonConfig]="actionButton">
  </ws-auth-editor-action-buttons>
  <!-- <ws-auth-editor-steps [steps]="stepper" [currentStep]="currentStep" (change)="currentStep = $event">
  </ws-auth-editor-steps> -->
  <div *ngIf="mediumScreen">
    <div class="ui" [ngClass]="{ toHide: !leftArrow }">
      <button class="p-1" mat-icon-button (click)="sidenav.toggle(); leftArrow = !leftArrow" i18n-aria-label
        aria-label="Open side panel" i18n-matTooltip matTooltipPosition="right" matTooltip="Open side panel">
        <mat-icon>keyboard_arrow_right</mat-icon>
      </button>
    </div>
  </div>
  <mat-sidenav-container autosize="true" id="auth-toc" class="example-container">
    <mat-sidenav #sidenav [mode]="mode$ | async" [(opened)]="sideBarOpened" (closedStart)="sidenavClose()">
      <div class="sticky">
        <ws-auth-table-of-contents (action)="subAction($event)" (closeEvent)="sidenav.toggle(); leftArrow = !leftArrow">
        </ws-auth-table-of-contents>
      </div>
    </mat-sidenav>

    <mat-sidenav-content class="pl-6 pr-6 ml-6">
      <div>
        <!-- {{viewMode}}, {{newViewMode}} -->
        <!-- <ws-auth-edit-meta [parentContent]="currentParentId" [stage]="1" [class.hidden]="viewMode == 'meta'"
          [isSubmitPressed]="isSubmitPressed" (data)="action($event)"></ws-auth-edit-meta>
        <ws-auth-url-upload [isCollectionEditor]="true" *ngIf="viewMode === 'curate'"
          [isSubmitPressed]="isSubmitPressed" (data)="action($event)"></ws-auth-url-upload>
        <ws-auth-file-upload [isCollectionEditor]="true" *ngIf="viewMode === 'upload'"
          [isSubmitPressed]="isSubmitPressed" (data)="action($event)">
        </ws-auth-file-upload> -->
        <mat-horizontal-stepper labelPosition="bottom" #stepper id="curate-container">
          <mat-step state="create1" *ngIf="newViewMode === 'Resource'">
            <ng-template matStepLabel><span class="ws-mat-default-text">
                {{viewMode === 'curate'?'Attach Link':(viewMode=== 'upload'?'Upload':
                (viewMode=== 'web'?'Web Module':'Assessment'))}}</span>
            </ng-template>
            <ws-auth-url-upload [isCollectionEditor]="true" *ngIf="viewMode === 'curate'"
              [isSubmitPressed]="isSubmitPressed" (data)="action($event)"></ws-auth-url-upload>
            <ws-auth-file-upload [isCollectionEditor]="true" *ngIf="viewMode === 'upload'"
              [isSubmitPressed]="isSubmitPressed" (data)="action($event)">
            </ws-auth-file-upload>
            <div *ngIf="viewMode === 'web'">
              Please go to drafts to edit Web Pages or Click
              <a class="m-auto" target="_blank" routerLink="/author/editor/{{currentContent}}/web-module"
                i18n-aria-label aria-label="Back">
                here
              </a>
            </div>
            <ws-auth-general-details *ngIf="viewMode === 'quiz'" (data)="action($event)"></ws-auth-general-details>
          </mat-step>
          <mat-step state="create1">
            <ng-template matStepLabel><span class="ws-mat-default-text">Basic Details</span>
            </ng-template>
            <!-- [class.hidden]="viewMode !== 'meta'" -->
            <ws-auth-edit-meta [parentContent]="currentParentId" [stage]="1" [isSubmitPressed]="isSubmitPressed"
              (data)="action($event)"></ws-auth-edit-meta>
          </mat-step>
          <mat-step state="create1">
            <ng-template matStepLabel><span class="ws-mat-default-text">Classification</span>
            </ng-template>
            <ws-auth-edit-meta [stage]="2" [nextAction]="'done'" [isSubmitPressed]="isSubmitPressed"
              (data)="action($event)">
            </ws-auth-edit-meta>
          </mat-step>
          <mat-step state="create1">
            <ng-template matStepLabel><span class="ws-mat-default-text">Collaborators</span>
            </ng-template>
            <ws-auth-edit-meta [stage]="3" [nextAction]="'done'" [isSubmitPressed]="isSubmitPressed"
              (data)="action($event)">
            </ws-auth-edit-meta>
          </mat-step>
          <!-- Icon overrides. -->
          <!-- check_circle -->
          <ng-template matStepperIcon="phone">
            <mat-icon class="ws-mat-default-text">radio_button_checked</mat-icon>
          </ng-template>
          <ng-template matStepperIcon="create1">
            <mat-icon class="ws-mat-default-text">radio_button_unchecked</mat-icon>
          </ng-template>
          <ng-template matStepperIcon="edit">
            <mat-icon class="ws-mat-default-text">radio_button_checked</mat-icon>
          </ng-template>
          <ng-template matStepperIcon="done">
            <mat-icon class="ws-mat-default-text">check_circle</mat-icon>
          </ng-template>
        </mat-horizontal-stepper>


      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
</ng-container>
<div *ngIf="previewIdentifier">
  <mat-icon (click)="closePreview()" class="close-preview" matTooltip="Back"
    i18n-matTooltip="Back button to go to previous page">
    arrow_back</mat-icon>
  <ws-auth-viewer [identifier]="previewIdentifier" [mimeTypeRoute]="mimeTypeRoute"></ws-auth-viewer>
</div>