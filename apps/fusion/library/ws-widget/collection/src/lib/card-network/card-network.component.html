<section *ngIf="enableFeature">
  <!-- <h2 class="mat-toolbar cohorts-head shadow">Cohorts</h2> -->
  <mat-accordion [multi]="false">
    <mat-expansion-panel class="mat-elevation-z" (opened)="true">
      <mat-expansion-panel-header>
        <mat-panel-title i18n>Learners</mat-panel-title>
      </mat-expansion-panel-header>
      <ng-template matExpansionPanelContent>
        <div>
          <h3 class="mat-error text-center" i18n>
            Failed to fetch active users
          </h3>
          <h3 class="text-center" i18n>
            None
          </h3>
          <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 col-gap-4">
            <ng-container *ngFor="let cohort of cardArray" [ngTemplateOutlet]="unitCohortNew"
              [ngTemplateOutletContext]="{ user: cohort }">
            </ng-container>
          </div>
        </div>
        <div class="text-center">
          <mat-spinner [strokeWidth]="3" [diameter]="40" class="display-inline-block"></mat-spinner>
        </div>
      </ng-template>
    </mat-expansion-panel>
    <mat-expansion-panel class="mat-elevation-z" (opened)="true">
      <mat-expansion-panel-header>
        <mat-panel-title i18n>Top performers</mat-panel-title>
      </mat-expansion-panel-header>
      <ng-template matExpansionPanelContent>
        <div>
          <h3 class="mat-error text-center" i18n>
            Failed to fetch top performers
          </h3>
          <h3 class="text-center" i18n>
            None
          </h3>
          <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 col-gap-4">
            <ng-container [ngTemplateOutlet]="unitCohortNew" [ngTemplateOutletContext]="{ user: cohort }">
            </ng-container>
          </div>
        </div>
        <div class="text-center">
          <mat-spinner [strokeWidth]="3" [diameter]="40" class="display-inline-block"></mat-spinner>
        </div>
      </ng-template>
    </mat-expansion-panel>
    <mat-expansion-panel class="mat-elevation-z" (opened)="true">
      <mat-expansion-panel-header>
        <mat-panel-title i18n>Curators</mat-panel-title>
      </mat-expansion-panel-header>
      <ng-template matExpansionPanelContent>
        <div>
          <h3 class="mat-error text-center" i18n>
            Failed to fetch curators
          </h3>
          <h3 class="text-center" i18n>
            None
          </h3>
          <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 col-gap-4">
            <ng-container *ngFor="let cohort of cardArray" [ngTemplateOutlet]="unitCohortNew"
              [ngTemplateOutletContext]="{ user: cohort }"></ng-container>
          </div>
        </div>
        <div class="text-center">
          <mat-spinner [strokeWidth]="3" [diameter]="40" class="display-inline-block"></mat-spinner>
        </div>
      </ng-template>
    </mat-expansion-panel>

  </mat-accordion>

  <ng-template #unitCohort let-user="user">
    <div class="unit-cohort">
      <ws-widget-user-image class="cohort-image" [email]="user.email"></ws-widget-user-image>
      <div (click)="goToUserProfile(user)" [ngClass]="{'cursor-pointer': enablePeopleSearch}"
        class="width-expand padding-left-xs">
        <div class="mat-body-strong cohorts-name">
          {{
            { firstName: user.first_name, lastName: user.last_name, email: user.email }
          }}
        </div>
        <div class="mat-caption cohorts-desc">{{ user.desc }}</div>
      </div>
    </div>
  </ng-template>

  <ng-template #unitCohortNew let-user="user">
    <div class="unit-cohort sm:pr-8 md:pr-10">


      <ws-widget-user-image class="user-image" [imageType]="'user-photo'" [userName]="getUserFullName(user)"
        [imageSize]="'small'" [email]="user.email" [imageUrl]="user.photo || ''"></ws-widget-user-image>
      <div (click)="goToUserProfile(user)" [ngClass]="{'cursor-pointer': enablePeopleSearch}"
        class="width-expand padding-left-xs">
        <div class="mat-body-strong cohorts-name">
          {{
            { firstName: user.first_name, lastName: user.last_name, email: user.email }
          }}
        </div>
        <div class="mat-caption cohorts-desc">{{ user.desc }}</div>
      </div>
    </div>

  </ng-template>
</section>